(function(e){function t(t){for(var c,r,s=t[0],a=t[1],l=t[2],d=0,b=[];d<s.length;d++)r=s[d],Object.prototype.hasOwnProperty.call(o,r)&&o[r]&&b.push(o[r][0]),o[r]=0;for(c in a)Object.prototype.hasOwnProperty.call(a,c)&&(e[c]=a[c]);u&&u(t);while(b.length)b.shift()();return i.push.apply(i,l||[]),n()}function n(){for(var e,t=0;t<i.length;t++){for(var n=i[t],c=!0,s=1;s<n.length;s++){var a=n[s];0!==o[a]&&(c=!1)}c&&(i.splice(t--,1),e=r(r.s=n[0]))}return e}var c={},o={app:0},i=[];function r(t){if(c[t])return c[t].exports;var n=c[t]={i:t,l:!1,exports:{}};return e[t].call(n.exports,n,n.exports,r),n.l=!0,n.exports}r.m=e,r.c=c,r.d=function(e,t,n){r.o(e,t)||Object.defineProperty(e,t,{enumerable:!0,get:n})},r.r=function(e){"undefined"!==typeof Symbol&&Symbol.toStringTag&&Object.defineProperty(e,Symbol.toStringTag,{value:"Module"}),Object.defineProperty(e,"__esModule",{value:!0})},r.t=function(e,t){if(1&t&&(e=r(e)),8&t)return e;if(4&t&&"object"===typeof e&&e&&e.__esModule)return e;var n=Object.create(null);if(r.r(n),Object.defineProperty(n,"default",{enumerable:!0,value:e}),2&t&&"string"!=typeof e)for(var c in e)r.d(n,c,function(t){return e[t]}.bind(null,c));return n},r.n=function(e){var t=e&&e.__esModule?function(){return e["default"]}:function(){return e};return r.d(t,"a",t),t},r.o=function(e,t){return Object.prototype.hasOwnProperty.call(e,t)},r.p="/";var s=window["webpackJsonp"]=window["webpackJsonp"]||[],a=s.push.bind(s);s.push=t,s=s.slice();for(var l=0;l<s.length;l++)t(s[l]);var u=a;i.push([0,"chunk-vendors"]),n()})({0:function(e,t,n){e.exports=n("56d7")},"0169":function(e,t,n){},"396f":function(e,t,n){},"4b56":function(e,t,n){"use strict";n("e133")},"4ca4":function(e,t,n){},"56d7":function(e,t,n){"use strict";n.r(t);n("e260"),n("e6cf"),n("cca6"),n("a79d");var c=n("7a23");n("b0c0");function o(e,t,n,o,i,r){var s=Object(c["m"])("HomeMenu"),a=Object(c["m"])("Game");return i.gameNotStart?(Object(c["h"])(),Object(c["c"])(s,{key:0,name:i.user.name,skin:i.user.skin},null,8,["name","skin"])):(Object(c["h"])(),Object(c["c"])(a,Object(c["g"])({key:1},i.user,{onEnd:r.goMenu}),null,16,["onEnd"]))}var i=Object(c["q"])("data-v-74c4c2e2");Object(c["j"])("data-v-74c4c2e2");var r={id:"menupage",class:"middle"},s=Object(c["f"])("button",{id:"setting"},null,-1),a=Object(c["f"])("h2",null,"Corona.io",-1);Object(c["i"])();var l=i((function(e,t,n,o,l,u){var d=Object(c["m"])("skin-window"),b=Object(c["m"])("skin-choose"),f=Object(c["m"])("base-block");return Object(c["h"])(),Object(c["c"])("div",r,[l.openDialog?(Object(c["h"])(),Object(c["c"])(d,{key:0,skin:n.skin,colorList:l.colorList,onCloseWindow:u.updateSkin},null,8,["skin","colorList","onCloseWindow"])):Object(c["d"])("",!0),Object(c["f"])(f,{class:"middle"},{default:i((function(){return[s,a,Object(c["f"])(b,{onClick:u.openWindow,skin:l.inputSkin},null,8,["onClick","skin"]),Object(c["p"])(Object(c["f"])("input",{type:"text","onUpdate:modelValue":t[1]||(t[1]=function(e){return n.name=e}),placeholder:"Nick"},null,512),[[c["o"],n.name]]),Object(c["f"])("button",{id:"play",onClick:t[2]||(t[2]=function(e){return u.play(n.name,l.inputSkin)})},"Play")]})),_:1})])})),u=Object(c["q"])("data-v-8a5f9842"),d=u((function(e,t,n,o,i,r){return Object(c["h"])(),Object(c["c"])("span",null,[Object(c["f"])("button",{style:[n.skin?{backgroundColor:n.skin,"border-style":"none",color:"white"}:{"border-style":"dashed"}]}," Skin ",4)])})),b={props:["skin"],date:function(){return{}}};n("94f6");b.render=d,b.__scopeId="data-v-8a5f9842";var f=b,h=Object(c["q"])("data-v-14292d6e");Object(c["j"])("data-v-14292d6e");var p=Object(c["f"])("div",null,null,-1),j={open:""},O=Object(c["f"])("header",null,[Object(c["f"])("h2",null,"Available Skins")],-1);Object(c["i"])();var v=h((function(e,t,n,o,i,r){var s=Object(c["m"])("circle-button");return Object(c["h"])(),Object(c["c"])(c["a"],null,[p,Object(c["f"])("dialog",j,[O,Object(c["f"])("button",{onClick:t[1]||(t[1]=function(){return r.finish&&r.finish.apply(r,arguments)}),id:"close"},"x"),Object(c["f"])("section",null,[(Object(c["h"])(!0),Object(c["c"])(c["a"],null,Object(c["k"])(n.colorList,(function(e){return Object(c["h"])(),Object(c["c"])(s,{onClick:function(t){return r.updateSkin(e)},color:e,key:e},null,8,["onClick","color"])})),128))])])],64)})),m={props:["skin","colorList"],emits:["closeWindow"],methods:{finish:function(){this.$emit("closeWindow",this.inputSkin)},updateSkin:function(e){this.inputSkin=e,this.finish()}},data:function(){return{inputSkin:this.skin}}};n("97c7");m.render=v,m.__scopeId="data-v-14292d6e";var k=m,y={components:{"skin-window":k,"skin-choose":f},props:["name","skin"],data:function(){return{openDialog:!1,colorList:["#f5da42","#42c2f5","#f54242","#cef542","#f59b42"],inputSkin:this.skin}},inject:["play"],methods:{updateSkin:function(e){this.inputSkin=e,this.openDialog=!1},openWindow:function(){this.openDialog=!0}}};n("ceec");y.render=l,y.__scopeId="data-v-74c4c2e2";var g=y,w=Object(c["q"])("data-v-7d8b3da5");Object(c["j"])("data-v-7d8b3da5");var x=Object(c["f"])("canvas",{id:"canvas"},null,-1),_=Object(c["f"])("h3",null,"Leaderboard",-1),S={class:"left"},C={class:"right"};Object(c["i"])();var P=w((function(e,t,n,o,i,r){var s=Object(c["m"])("base-block");return Object(c["h"])(),Object(c["c"])(c["a"],null,[x,Object(c["f"])(s,{id:"leaderboard"},{default:w((function(){return[_,Object(c["f"])("ol",null,[(Object(c["h"])(!0),Object(c["c"])(c["a"],null,Object(c["k"])(i.leader,(function(e){return Object(c["h"])(),Object(c["c"])("li",{key:e.name},[Object(c["f"])("span",S,Object(c["n"])(e.name),1),Object(c["f"])("span",C,Object(c["n"])(e.score),1)])})),128))])]})),_:1}),Object(c["f"])(s,{id:"score"},{default:w((function(){return[Object(c["e"])(" Score : "+Object(c["n"])(i.score),1)]})),_:1}),Object(c["f"])("button",{id:"exit",onClick:t[1]||(t[1]=function(){return r.end&&r.end.apply(r,arguments)})},"X")],64)})),I=(n("cb29"),n("fb6a"),{props:["name","skin"],emits:["end"],data:function(){return{score:10,leader:[{name:"John",score:5e5},{name:"PP",score:5e4},{name:"KK",score:1e4},{name:"Hello",score:1e3},{name:"Moo",score:100}],connection:null,interval:null,mouse_x:0,mouse_y:0,action:!1,id:null,canvas:null,ctx:null,dpi:null,screen_x:0,screen_y:0,alive:!0}},created:function(){var e=this;console.log("Starting connection to WebSocket Server"),this.connection=new WebSocket("wss://8209e93cf5d4.ngrok.io/ws/game/"),this.connection.onmessage=function(t){e.draw(JSON.parse(t.data))},this.connection.onopen=function(t){console.log("Successfully connected to the echo websocket server...");var n={cmd:"join_room",info:{name:e.name,skin:e.skin,room:"test"}};e.sendUser(n),window.onmousemove=function(t){e.mouse_x=t.pageX-e.screen_x,e.mouse_y=t.pageY-e.screen_y},window.onresize=function(t){e.screen_x=Math.floor(window.innerWidth/2),e.screen_y=Math.floor(window.innerHeight/2)},window.onresize(),window.onkeydown=function(t){32==t.keyCode&&(e.action=!0)},e.interval=setInterval((function(){var t={cmd:"blob_move",info:{xpos:e.mouse_x,ypos:e.mouse_y,action:e.action}};e.sendUser(t),e.action&&(e.action=!1)}),150)}},mounted:function(){this.canvas=document.getElementById("canvas"),this.ctx=this.canvas.getContext("2d"),this.dpi=window.devicePixelRatio},methods:{sendUser:function(e){this.connection.send(JSON.stringify(e))},end:function(){clearInterval(this.interval),this.interval=null,this.score=10,this.connection.close(),this.connection=null,this.$emit("end")},draw:function(e){for(var t in this.fix_dpi(),this.ctx.clearRect(0,0,this.canvas.width,this.canvas.height),e.blobs)this.ctx.beginPath(),this.ctx.arc(this.screen_x+e.blobs[t].xpos,this.screen_y+e.blobs[t].ypos,e.blobs[t].radius,0,2*Math.PI,!1),this.ctx.font="15px Helvetica",this.ctx.textAlign="center",this.ctx.textBaseLine="middle",this.ctx.fillText(e.blobs[t].name,this.screen_x+e.blobs[t].xpos,this.screen_y+e.blobs[t].ypos),this.ctx.fillStyle=e.blobs[t].skin,this.ctx.fill(),this.ctx.strokeStyle=e.blobs[t].skin,this.ctx.stroke();this.score=e.score,e.alive||this.end()},fix_dpi:function(){var e={height:function(){return+getComputedStyle(document.getElementById("canvas")).getPropertyValue("height").slice(0,-2)},width:function(){return+getComputedStyle(document.getElementById("canvas")).getPropertyValue("width").slice(0,-2)}};this.canvas.setAttribute("width",e.width()*this.dpi),this.canvas.setAttribute("height",e.height()*this.dpi)}}});n("4b56");I.render=P,I.__scopeId="data-v-7d8b3da5";var M=I,W={data:function(){return{user:{name:"",skin:""},gameNotStart:!0}},components:{HomeMenu:g,Game:M},methods:{play:function(e,t){this.user.name=e,this.user.skin=t,this.gameNotStart=!1},goMenu:function(){this.gameNotStart=!0}},provide:function(){return{play:this.play}}};n("d3b5");W.render=o;var L=W,N=Object(c["q"])("data-v-0791e1c2");Object(c["j"])("data-v-0791e1c2");var q={class:"block"};Object(c["i"])();var E=N((function(e,t,n,o,i,r){return Object(c["h"])(),Object(c["c"])("div",q,[Object(c["l"])(e.$slots,"default")])})),H={};n("c92d");H.render=E,H.__scopeId="data-v-0791e1c2";var J=H,A=Object(c["q"])("data-v-9712b488"),B=A((function(e,t,n,o,i,r){return Object(c["h"])(),Object(c["c"])("span",null,[Object(c["f"])("button",{style:{backgroundColor:n.color}},[Object(c["l"])(e.$slots,"default")],4)])})),D={props:["color"]};n("d8e9");D.render=B,D.__scopeId="data-v-9712b488";var U=D,$=Object(c["b"])(L);$.component("base-block",J),$.component("circle-button",U),$.mount("#app")},"94f6":function(e,t,n){"use strict";n("396f")},"97c7":function(e,t,n){"use strict";n("0169")},b138:function(e,t,n){},c92d:function(e,t,n){"use strict";n("b138")},ceec:function(e,t,n){"use strict";n("4ca4")},d298:function(e,t,n){},d3b5:function(e,t,n){"use strict";n("d298")},d8e9:function(e,t,n){"use strict";n("fc8b")},e133:function(e,t,n){},fc8b:function(e,t,n){}});
//# sourceMappingURL=app.c7b59a19.js.map